!function($){function isDelimiter(delimiters,key){var has=delimiters.find(function(i){return i===key});return void 0===has?!1:!0}function onInit(values,templateKey,templateReplaceItem){values.length>0&&(in_list=$.extend([],values),$(".tagalizer-placeholder").before(replaceTemplate(templateKey,templateReplaceItem,in_list)))}function onEdit(){tagEdit.index=$(".tagalizer-item:last-child").index(),tagEdit.value=settings.regex.exec($(".tagalizer-item:last-child").html()),$(".tagalizer-item:last-child").remove(),$(".tagalizer-placeholder").val(tagEdit.value)}function onDelete(index){settings.onDelete(index,in_list[index]),1==in_list.length?in_list=new Array:in_list.splice(index,1),settings.input&&setToInput(settings.input)}function setToInput(input){clearInput(input),$(input).val(seriliazerTag(settings.serializerDelimiter))}function bindEnd(callback){$(".tagalizer-item-list > .tagalizer-item:last-child").bind("click",function(){callback.call(this,$(".tagalizer-item-list > .tagalizer-item").index(this),$(this).html())}),bindDelete()}function bindClickEach(callback){$(".tagalizer-item").each(function(i){var index=i;$(this).on("click",function(){callback.call(this,index,$(this).html())})}),bindDelete()}function bindDelete(){$(".tagalizer-item").each(function(i){$(this).find(".delete-tag").on("click",function(){onDelete(i),$(this).parent().remove()})})}function isInList(item,list){var has=!1;for(var l in list)list[l]==item.trim()&&(has=!0);return has}function clearInput(selector){$(selector).val("")}function replaceTemplate(template,replacer,itens){for(var __template=template,content="",i=0;i<itens.length;i++)content+=__template.replace(replacer,itens[i]);return"<div class='tagalizer-item-list'>"+content+"</div>"}function seriliazerTag(delimiter){var result="";for(var i in in_list)result+=i==in_list.length-1?settings.regex.exec(in_list[i]):settings.regex.exec(in_list[i])+delimiter;return result}var settings={templateReplaceItem:"{{item}}",templateKey:'<div class="tagalizer-item">{{item}}<i class="fa fa-times-circle delete-tag" aria-hidden="true"></i></div>',onKeyUp:function(key,keyCode){},onItemAdd:function(item,length){},onDelete:function(index,value){},onClickItem:function(index,value){},onDuplicateItem:function(){}},in_list=new Array,tagEdit={index:void 0,value:void 0,hasItemEdit:function(){return void 0!==this.index&&void 0!==this.value},reset:function(){this.index=void 0,this.value=void 0},length:function(){return this.value.length}};$.fn.tagalizer=function(options){var defaults={input:"",initialValues:[],delimiters:[" ",",",";","Enter"],serializerDelimiter:";",regex:/[a-zA-Z\d-]+/,placeholder:"keyword",actionIn:"keyup",duplicate:!1,minLength:3,maxLenght:10};settings=$.extend({},settings,defaults,options);var input_placeholder=$(this).html('<input type="text" placeholder="'+settings.placeholder+'" class="tagalizer-placeholder"/>');return onInit(settings.initialValues,settings.templateKey,settings.templateReplaceItem),bindClickEach(settings.onClickItem),input_placeholder.on(settings.actionIn,function(e){if(8==e.keyCode)return void(0==$(".tagalizer-placeholder").val().length&&(tagEdit.hasItemEdit()?onDelete(tagEdit.index):onEdit()));var value=$(".tagalizer-placeholder").val();if(value.length>=settings.minLength&&value.length==settings.maxLenght||isDelimiter(settings.delimiters,e.key)&&value.length>=settings.minLength&&value.length<=settings.maxLenght){if(!settings.duplicate&&isInList(value,in_list)&&!tagEdit.hasItemEdit())return $(".tagalizer-placeholder").val(""),void settings.onDuplicateItem();if(tagEdit.hasItemEdit())in_list[tagEdit.index]=value,tagEdit.reset();else if(value.length==settings.maxLenght)in_list.push(value);else{var indexOfDelimiter=void 0;for(var d in settings.delimiters)-1!=value.indexOf(settings.delimiters[d])&&(indexOfDelimiter=value.indexOf(settings.delimiters[d]));in_list.push(value.substr(0,indexOfDelimiter))}settings.input&&setToInput(settings.input),settings.onItemAdd(value,value.length),$(".tagalizer-placeholder").prev(".tagalizer-item-list").remove(),$(".tagalizer-placeholder").before(replaceTemplate(settings.templateKey,settings.templateReplaceItem,in_list)),bindEnd(settings.onClickItem),clearInput(".tagalizer-placeholder")}}),this},$.fn.tagalizer.getItens=function(){return in_list}}(jQuery);